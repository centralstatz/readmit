<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Package Development Notes • readmit</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png"><link rel="icon" sizes="any" href="favicon.ico"><link rel="manifest" href="site.webmanifest"><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/Lexend-0.4.10/font.css" rel="stylesheet"><link href="deps/JetBrains_Mono-0.4.10/font.css" rel="stylesheet"><link href="deps/Tomorrow-0.4.10/font.css" rel="stylesheet"><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Package Development Notes"><meta property="og:image" content="https://centralstatz.github.io/readmit/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">readmit</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="articles/hsr-analysis.html">Investigating a Hospital-Specific Report (HSR)</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-title-body">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="logo.png" class="logo" alt=""><h1>Package Development Notes</h1>

    </div>


<div id="package-development-notes" class="section level1">

<p>Contains daily notes with details about how things were developed. Primarily following <a href="https://r-pkgs.org/" class="external-link uri">https://r-pkgs.org/</a>.</p>
</div>
<div class="section level1">
<h1 id="id_11262025">11/26/2025<a class="anchor" aria-label="anchor" href="#id_11262025"></a></h1>
<ul><li>CMS changed the HSR format for 2026. Added to documentation to note this change in README, vignette, and function docs.</li>
<li>Changed DESCRIPTION and README package descriptions</li>
<li>Fixed global binding issues</li>
<li>Fixed special characters in columns by removing them</li>
</ul></div>
<div class="section level1">
<h1 id="id_11252025">11/25/2025<a class="anchor" aria-label="anchor" href="#id_11252025"></a></h1>
<ul><li>Adding to <code>README</code> with a description of the package</li>
<li>Adding a skelaton vignette for “Investigating a Hospital-Specific Report (HSR)”, as it’s linked from README. Will actually write it later. Initialized it with <code>use_vignette("hsr-analysis")</code>.</li>
</ul></div>
<div class="section level1">
<h1 id="id_11232025">11/23/2025<a class="anchor" aria-label="anchor" href="#id_11232025"></a></h1>
<ul><li>Added a custom color scheme to package site. Used HEX color picker and uploaded package logo, then used those colors to specify background/font colors, and used Google fonts.</li>
</ul></div>
<div class="section level1">
<h1 id="id_11222025">11/22/2025<a class="anchor" aria-label="anchor" href="#id_11222025"></a></h1>
<ul><li>Changed timeline function to be <code>hrrp_get_dates</code>. For now, it just takes one date object and returns a subset of the included tables based on input setttings. Sufficient for now until different functionality needed.</li>
</ul></div>
<div class="section level1">
<h1 id="id_11212025">11/21/2025<a class="anchor" aria-label="anchor" href="#id_11212025"></a></h1>
<ul><li>Adding an extenal dataset containing key dates for HRRP (<a href="https://r-pkgs.org/data.html#sec-data-data" class="external-link uri">https://r-pkgs.org/data.html#sec-data-data</a>). This will be available to users but also available internally to my functions.</li>
</ul></div>
<div class="section level1">
<h1 id="id_11172025">11/17/2025<a class="anchor" aria-label="anchor" href="#id_11172025"></a></h1>
<ul><li>Decided not to do a timeline function because it’s static output; can just direct people to CMS docs in documentation</li>
<li>Instead, just having a single function <code>hrrp_program_year</code> that actually returns program year for a vector of inputs which can be useful for a dataset</li>
</ul></div>
<div class="section level1">
<h1 id="id_11152025">11/15/2025<a class="anchor" aria-label="anchor" href="#id_11152025"></a></h1>
<ul><li>Making a function called <code>hrrp_timeline</code> which will take one or more dates and return import dates in context to that date around the HRRP program. Default to current date.</li>
</ul></div>
<div class="section level1">
<h1 id="id_11142025">11/14/2025<a class="anchor" aria-label="anchor" href="#id_11142025"></a></h1>
<ul><li>Spacing out examples so they render better in documentation/website</li>
<li>Adding function to create individual-level readmission risks (predicted and expected). Have the global binding issue to deal with again:</li>
</ul><pre><code>❯ checking R code for possible problems ... NOTE
  hsr_readmission_risks: no visible binding for global variable ‘Value’
  hsr_readmission_risks: no visible binding for global variable ‘Factor’
  hsr_readmission_risks: no visible binding for global variable ‘Weight’
  hsr_readmission_risks: no visible binding for global variable ‘ID
    Number’
  hsr_readmission_risks: no visible binding for global variable ‘LP’
  hsr_readmission_risks: no visible binding for global variable
    ‘Predicted’
  hsr_readmission_risks: no visible binding for global variable
    ‘Expected’
  Undefined global functions or variables:
    Expected Factor ID Number LP Predicted Value Weight

0 errors ✔ | 0 warnings ✔ | 2 notes ✖</code></pre>
<p>But we’ll carry on for now.</p>
<ul><li>Also, discovered there are nuances in column names in the reports, such that some headers will have annoying special characters, so need to create more robust approach for specifiying headers (without drastically changing their source names).</li>
<li>Renaming <code>_extract_</code> functions without prefix because it isn’t needed</li>
</ul></div>
<div class="section level1">
<h1 id="id_11132025">11/13/2025<a class="anchor" aria-label="anchor" href="#id_11132025"></a></h1>
<ul><li>Created function to extract the dually-eligible stays (<code>hsr_extract_dual_stays</code>).</li>
<li>Changing all examples to use the FY2025 mock report.</li>
</ul></div>
<div class="section level1">
<h1 id="id_11122025">11/12/2025<a class="anchor" aria-label="anchor" href="#id_11122025"></a></h1>
<ul><li>Added formatted reference index to the package website. See <a href="https://github.com/centralstatz/readmit/issues/15" class="external-link">this issue</a>.</li>
<li>Added function (<code>hsr_extract_discharges</code>) to import discharges for a specified cohort. Also gives the ability to keep certain columns (e.g., PHI, risk factors) and certain rows (e.g., eligible discharges only).</li>
</ul></div>
<div class="section level1">
<h1 id="id_11112025">11/11/2025<a class="anchor" aria-label="anchor" href="#id_11112025"></a></h1>
<ul><li>Created function to extract cohort summary (<code>hsr_extract_cohort_summary</code>). See <a href="https://github.com/centralstatz/readmit/issues/10" class="external-link">this issue</a>
</li>
</ul></div>
<div class="section level1">
<h1 id="id_11102025">11/10/2025<a class="anchor" aria-label="anchor" href="#id_11102025"></a></h1>
<ul><li>Grouping PDC functions together into common <code>.R</code> file and documentation (<a href="https://github.com/centralstatz/readmit/issues/9" class="external-link uri">https://github.com/centralstatz/readmit/issues/9</a>)</li>
<li>Updated documentation across files to better align best practices (<a href="https://r-pkgs.org/man.html#roxygen2-basics" class="external-link uri">https://r-pkgs.org/man.html#roxygen2-basics</a>)</li>
<li>Changed the <code>hsr_extract_payment_summary</code> function to return wide format. Added helper functions (non-exported) that consolidate repeated code in convenience functions.</li>
<li>Used <code>use_import_from("rlang", ".data")</code> to resolve the global binding issue. Then in the <code>hsr_extract_coefficients</code> function, used the <code>.data</code> pronoun (<code>dplyr::filter(!is.na(.data$Value))</code>)</li>
<li>Only 1 note regarding <code>NEWS.md</code>
</li>
</ul><pre><code>❯ checking package subdirectories ... NOTE
  Problems with news in ‘NEWS.md’:
  No news entries found.

0 errors ✔ | 0 warnings ✔ | 1 note ✖</code></pre>
</div>
<div class="section level1">
<h1 id="id_1192025">11/9/2025<a class="anchor" aria-label="anchor" href="#id_1192025"></a></h1>
<ul><li>Created functions to extract Table 1 HSR components: <code>hsr_extract_payment_summary</code> and individual functions. All of these are defined in the same <code>.R</code> file and are grouped in the same <code>Rd</code> file. Probably need to do some clean. Stil debating if default behavior should be a pivoted data frame or not.</li>
</ul></div>
<div class="section level1">
<h1 id="id_1172025">11/7/2025<a class="anchor" aria-label="anchor" href="#id_1172025"></a></h1>
<ul><li>Initialized functions to explore/import data directory from the <a href="https://data.cms.gov/provider-data/" class="external-link">Provider Data Catalog</a>. These were adapted from a previous package I already started (<a href="https://github.com/zajichek/carecompare/blob/main/R/FUNCTIONS.R" class="external-link uri">https://github.com/zajichek/carecompare/blob/main/R/FUNCTIONS.R</a>). <code>pdc_topics</code>, <code>pdc_datasets</code>, <code>pdc_read</code>. Also initialized unit test files for them.
<ul><li>Added dependencies as well: <code>httr</code>, <code>readr</code>, <code>tibble</code>
</li>
<li>Added inital tests for all functions</li>
</ul></li>
<li>Still have some notes about global bindings</li>
</ul><pre><code>  hsr_extract_coefficients: no visible binding for global variable
    ‘Value’
  pdc_datasets: no visible binding for global variable ‘issued’
  pdc_datasets: no visible binding for global variable ‘modified’
  Undefined global functions or variables:
    Value issued modified

0 errors ✔ | 0 warnings ✔ | 2 notes ✖</code></pre>
</div>
<div class="section level1">
<h1 id="id_1162025">11/6/2025<a class="anchor" aria-label="anchor" href="#id_1162025"></a></h1>
<ul><li>Added package dependencies for <code>readxl</code>, <code>stringr</code>, <code>dplyr</code>, <code>tidyr</code>, <code>rlang</code> with <code>use_package()</code>
</li>
<li>Added unit testing structure with <code>use_testthat()</code>; created initial (toy) test for <code>use_test("hsr_extract_coefficients")</code>
</li>
<li>Added a README file with <code>usethis::use_readme_rmd()</code> and built default <code>.md</code> file with <code>build_readme()</code>
</li>
<li>Added NEWS.md with <code>use_news_md()</code>
</li>
<li>Added badges (in anticipation): <code>use_cran_badge()</code>, <code>use_coverage()</code>, <code>use_github_action("check-standard")</code>
</li>
<li>Added logo (created with <a href="https://connect.thinkr.fr/hexmake/" class="external-link">hexmake</a> + ChatGPT): <code>use_logo()</code>
</li>
<li>Started package website with <code>use_pkgdown()</code> and <code><a href="https://pkgdown.r-lib.org/reference/build_site.html" class="external-link">pkgdown::build_site()</a></code> to get initial site</li>
<li>Then used <code>usethis::use_pkgdown_github_pages()</code> to create GitHub Actions workflow to update site on commit/push. This automatically configures on GitHub (the branch is created and my Pages are configured). But I need to push the site because no <code>pkgdown</code> stuff is there yet.</li>
<li>Added example HSR report to package, following steps here: <a href="https://r-pkgs.org/data.html#sec-data-extdata" class="external-link uri">https://r-pkgs.org/data.html#sec-data-extdata</a>
<ul><li>Made the <code>inst/extdata/</code> directory</li>
<li>Went to QualityNet and downloaded the FY 2025 HSR (<a href="https://qualitynet.cms.gov/inpatient/hrrp/reports#tab3" class="external-link uri">https://qualitynet.cms.gov/inpatient/hrrp/reports#tab3</a>) (as of 11/8/2025 @ 11:56 AM CST). Added this file to the above directory.</li>
<li>As suggested (<a href="https://r-pkgs.org/data.html#sec-data-example-path-helper" class="external-link uri">https://r-pkgs.org/data.html#sec-data-example-path-helper</a>) I created a new helper function <code>hsr_example()</code> to help identify this file for users. <code>use_r("hsr_example")</code>. I then copied their exact function definition (with changes to reflect the current package). Added documentation. Added unit test to ensure that example file exists in user file system.</li>
<li>Did final <code>check()</code>, still one (expected) note (will resolve later) ``` ❯ checking package subdirectories … NOTE Problems with news in ‘NEWS.md’: No news entries found.</li>
</ul></li>
</ul><p>❯ checking R code for possible problems … NOTE hsr_extract_coefficients: no visible binding for global variable ‘Value’ Undefined global functions or variables: Value</p>
<p>0 errors ✔ | 0 warnings ✔ | 2 notes ✖</p>
<pre><code>* Added all FY mock reports to `extdata`. Used `rename_files("hsr_example", "hsr_mock_reports")` to rename the function to be more explicit. Changed all required areas to accomodate change.

# 11/5/2025

* Initialized package by creating repo here: https://github.com/centralstatz/readmit
* Then created _New Folder from Git_ in Positron, cloning that repo
* Then used `usethis::create_package(getwd())` to initialize package template
* Added this file `DEVNOTES.md` to `.Rbuildignore`
* Ran `usethis::use_r("hsr_extract_coefficients")` to create the packages first function, which extracts the list of model coefficients from a CMS Hospital Specific Report (HSR) for a specified cohort. Added argument checks.
* Used `devtools::load_all()` to test it (works on locally downloaded report).
* Did initial `devtools::check()` and got various warnings/notes, which is expected because nothing was configured yet.
* Edited the `DESCRIPTION` file (with possibly to change over time as package evolves), and added MIT license with `usethis::use_mit_license()`
* Added `roxygen2` documentation to function. Used `devtools::document()` to document it. Added `\dontrun` to roxygen for function as example doesn't work yet. Need to put external data in the package.
* Still have warning/note as I haven't declared dependencies, so will do that soon.</code></pre>
<p>❯ checking R code for possible problems … NOTE hsr_extract_coefficients: no visible binding for global variable ‘Value’ Undefined global functions or variables: Value</p>
<p>0 errors ✔ | 1 warning ✖ | 1 note ✖ ```</p>
<p>Starting <a href="https://r-pkgs.org/whole-game.html#install" class="external-link">here</a> next…</p>
</div>


  </main></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Alex Zajichek.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

